{#
Macros para Formulários reutilizáveis
Uso: {% from 'macros/forms.html' import input_text, input_date, select_field %}
#}

{% macro input_text(name, label, value='', placeholder='', required=false, disabled=false, help_text='', class='') %}
<div class="form-group mb-3">
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>
    <input type="text" class="form-control {{ class }}" id="{{ name }}" name="{{ name }}" value="{{ value }}" {% if
        placeholder %}placeholder="{{ placeholder }}" {% endif %} {% if required %}required{% endif %} {% if disabled
        %}disabled{% endif %}>
    {% if help_text %}
    <small class="form-text text-muted">{{ help_text }}</small>
    {% endif %}
</div>
{% endmacro %}

{% macro input_email(name, label, value='', required=false, help_text='') %}
<div class="form-group mb-3">
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>
    <input type="email" class="form-control" id="{{ name }}" name="{{ name }}" value="{{ value }}" {% if required
        %}required{% endif %}>
    {% if help_text %}
    <small class="form-text text-muted">{{ help_text }}</small>
    {% endif %}
</div>
{% endmacro %}

{% macro input_date(name, label, value='', required=false, min='', max='') %}
<div class="form-group mb-3">
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>
    <input type="date" class="form-control" id="{{ name }}" name="{{ name }}" value="{{ value }}" {% if min
        %}min="{{ min }}" {% endif %} {% if max %}max="{{ max }}" {% endif %} {% if required %}required{% endif %}>
</div>
{% endmacro %}

{% macro textarea(name, label, value='', rows=3, required=false, placeholder='', maxlength='') %}
<div class="form-group mb-3">
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>
    <textarea class="form-control" id="{{ name }}" name="{{ name }}" rows="{{ rows }}" {% if placeholder
        %}placeholder="{{ placeholder }}" {% endif %} {% if maxlength %}maxlength="{{ maxlength }}" {% endif %} {% if
        required %}required{% endif %}>{{ value }}</textarea>
    {% if maxlength %}
    <small class="form-text text-muted">Máximo {{ maxlength }} caracteres</small>
    {% endif %}
</div>
{% endmacro %}

{% macro select_field(name, label, options, selected='', required=false, empty_option='Selecione...') %}
<div class="form-group mb-3">
    <label for="{{ name }}" class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>
    <select class="form-select" id="{{ name }}" name="{{ name }}" {% if required %}required{% endif %}>
        {% if empty_option %}
        <option value="">{{ empty_option }}</option>
        {% endif %}
        {% for option in options %}
        {% if option is mapping %}
        <option value="{{ option.value }}" {% if option.value==selected %}selected{% endif %}>
            {{ option.label }}
        </option>
        {% else %}
        <option value="{{ option }}" {% if option==selected %}selected{% endif %}>
            {{ option }}
        </option>
        {% endif %}
        {% endfor %}
    </select>
</div>
{% endmacro %}

{% macro checkbox(name, label, checked=false, value='1') %}
<div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="{{ name }}" name="{{ name }}" value="{{ value }}" {% if checked
        %}checked{% endif %}>
    <label class="form-check-label" for="{{ name }}">
        {{ label }}
    </label>
</div>
{% endmacro %}

{% macro radio_group(name, label, options, selected='', required=false) %}
<div class="form-group mb-3">
    <label class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>
    {% for option in options %}
    <div class="form-check">
        <input class="form-check-input" type="radio" id="{{ name }}_{{ loop.index }}" name="{{ name }}"
            value="{{ option.value if option is mapping else option }}" {% if (option.value if option is mapping else
            option)==selected %}checked{% endif %} {% if required %}required{% endif %}>
        <label class="form-check-label" for="{{ name }}_{{ loop.index }}">
            {{ option.label if option is mapping else option }}
        </label>
    </div>
    {% endfor %}
</div>
{% endmacro %}