<div class="plano-card {% if plano.status == 'concluido' %}inactive{% endif %}">
    <div class="plano-card-header">
        <div class="flex-grow-1">
            <h3 class="plano-card-title">
                <i class="bi bi-diagram-3 me-2"></i>{{ plano.nome }}
            </h3>
            <span class="plano-status-badge {% if plano.status == 'concluido' %}active{% else %}inactive{% endif %}">
                {% if plano.status == 'concluido' %}
                <i class="bi bi-check-circle-fill me-1"></i>Concluído
                {% else %}
                <i class="bi bi-play-circle-fill me-1"></i>Em Andamento
                {% endif %}
            </span>
        </div>
    </div>

    <p class="plano-description">
        {{ plano.descricao or 'Sem descrição' }}
    </p>

    <div class="plano-meta">
        <div class="plano-meta-item">
            <i class="bi bi-person-fill"></i>
            <span>{{ plano.criado_por or 'Sistema' }}</span>
        </div>
        <div class="plano-meta-item">
            <i class="bi bi-calendar-fill"></i>
            <span>{{ plano.data_criacao|format_date_br if plano.data_criacao else 'N/A' }}</span>
        </div>
    </div>

    <div class="plano-actions">
        {% if plano.status == 'em_andamento' %}
        <button type="button" class="btn btn-plano btn-plano-primary btn-concluir-plano" data-plano-id="{{ plano.id }}"
            data-plano-nome="{{ plano.nome }}" title="Marcar como concluído">
            <i class="bi bi-check-lg"></i>Concluir
        </button>
        {% endif %}

        {% if pode_editar %}
        <a href="{{ url_for('planos.obter_plano', plano_id=plano.id, context=context) }}?modo=editar"
            class="btn btn-plano btn-plano-primary" title="Editar plano">
            <i class="bi bi-pencil"></i>Editar
        </a>
        {% endif %}

        <button type="button" class="btn btn-plano btn-plano-secondary btn-clonar-plano" data-plano-id="{{ plano.id }}"
            data-plano-nome="{{ plano.nome }}" title="Clonar plano">
            <i class="bi bi-files"></i>Clonar
        </button>

        {% if pode_excluir %}
        <button type="button" class="btn btn-plano btn-plano-danger btn-excluir-plano" data-bs-toggle="modal"
            data-bs-target="#modalExcluirPlano" data-plano-id="{{ plano.id }}" data-plano-nome="{{ plano.nome }}"
            title="Excluir plano">
            <i class="bi bi-trash"></i>Excluir
        </button>
        {% endif %}
    </div>
</div>