<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Input Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-5">
    <h3>Teste de Input de Data</h3>
    <input type="date" id="dateInput" class="form-control" max="2100-12-31">

    <script>
        // O Script que "deveria" funcionar
        const dateInput = document.getElementById('dateInput');

        dateInput.addEventListener('input', function () {
            const val = this.value;
            console.log("Input event. Value:", val);

            if (!val) return;

            const parts = val.split('-');
            // parts[0] Ã© o ano
            if (parts[0].length > 4) {
                console.log("Detectado ano > 4 digitos:", parts[0]);
                parts[0] = parts[0].substring(0, 4);
                this.value = parts.join('-');
                console.log("Corrigido para:", this.value);
            }
        });
    </script>
</body>

</html>